const a5_0x1ccb=['RUNNER_FAILURE_PERF_ENTRY','done','axiosException','/nx-cloud/executions/tasks','data','ciExecutionId:\x20','note','agentName','recordMetric','Completed\x20run\x20group\x20with\x20an\x20error','mapRespToPerfEntry','../../../utilities/metric-logger','axiosMultipleTries','next','DistributedAgentApi','__awaiter','defineProperty','runGroup:\x20','../../../utilities/nx-imports','dtePollTasks','tasks','ciExecutionId','createMetricRecorder','apiAxiosInstance','runGroup','/nx-cloud/executions/complete-run-group','../../../utilities/axios','then','value','response','__esModule','ciExecutionEnv','error:\x20','createApiAxiosInstance'];(function(_0x33f5ff,_0x1ccbaf){const _0x343169=function(_0x765b37){while(--_0x765b37){_0x33f5ff['push'](_0x33f5ff['shift']());}};_0x343169(++_0x1ccbaf);}(a5_0x1ccb,0x71));const a5_0x3431=function(_0x33f5ff,_0x1ccbaf){_0x33f5ff=_0x33f5ff-0x0;let _0x343169=a5_0x1ccb[_0x33f5ff];return _0x343169;};'use strict';var __awaiter=this&&this[a5_0x3431('0x4')]||function(_0x18b8fa,_0x3ca304,_0xd27b19,_0x12a30b){function _0x2fc8d0(_0x4a114c){return _0x4a114c instanceof _0xd27b19?_0x4a114c:new _0xd27b19(function(_0x5449f9){_0x5449f9(_0x4a114c);});}return new(_0xd27b19||(_0xd27b19=Promise))(function(_0xb83b1f,_0x1ccf2f){function _0x33f76d(_0x502a87){try{_0x2b4acd(_0x12a30b['next'](_0x502a87));}catch(_0x5b2125){_0x1ccf2f(_0x5b2125);}}function _0x48c7d4(_0x48d6f8){try{_0x2b4acd(_0x12a30b['throw'](_0x48d6f8));}catch(_0x4f1060){_0x1ccf2f(_0x4f1060);}}function _0x2b4acd(_0x3c4e5d){_0x3c4e5d[a5_0x3431('0x18')]?_0xb83b1f(_0x3c4e5d[a5_0x3431('0x11')]):_0x2fc8d0(_0x3c4e5d[a5_0x3431('0x11')])[a5_0x3431('0x10')](_0x33f76d,_0x48c7d4);}_0x2b4acd((_0x12a30b=_0x12a30b['apply'](_0x18b8fa,_0x3ca304||[]))[a5_0x3431('0x2')]());});};Object[a5_0x3431('0x5')](exports,a5_0x3431('0x13'),{'value':!![]});exports[a5_0x3431('0x3')]=void 0x0;const axios_1=require(a5_0x3431('0xf'));const environment_1=require('../../../utilities/environment');const metric_logger_1=require(a5_0x3431('0x0'));const {output}=require(a5_0x3431('0x7'));class DistributedAgentApi{constructor(_0x3006ed,_0x39c337,_0x5b995a,_0x52ea69,_0x1391d5,_0xeaec3f){this['branch']=_0x39c337;this[a5_0x3431('0xd')]=_0x5b995a;this[a5_0x3431('0xa')]=_0x52ea69;this[a5_0x3431('0x14')]=_0x1391d5;this['agentName']=_0xeaec3f;this[a5_0x3431('0xc')]=(0x0,axios_1[a5_0x3431('0x16')])(_0x3006ed);}[a5_0x3431('0x9')](_0x4b42d1,_0x263891,_0x24433a,_0x187b05){var _0xf20eb6;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2d2f72=(0x0,metric_logger_1[a5_0x3431('0xb')])(a5_0x3431('0x8'));try{const _0x423af0=yield(0x0,axios_1[a5_0x3431('0x1')])(()=>this[a5_0x3431('0xc')]['post'](a5_0x3431('0x1a'),{'runGroup':this[a5_0x3431('0xd')],'ciExecutionId':this[a5_0x3431('0xa')],'ciExecutionEnv':this[a5_0x3431('0x14')],'agentName':this[a5_0x3431('0x1e')],'executionId':_0x4b42d1,'statusCode':_0x263891,'completedTasks':_0x24433a,'targets':_0x187b05}));_0x2d2f72[a5_0x3431('0x1f')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x423af0));return _0x423af0[a5_0x3431('0x1b')];}catch(_0x241268){_0x2d2f72['recordMetric'](((_0xf20eb6=_0x241268===null||_0x241268===void 0x0?void 0x0:_0x241268[a5_0x3431('0x19')])===null||_0xf20eb6===void 0x0?void 0x0:_0xf20eb6['response'])?(0x0,metric_logger_1[a5_0x3431('0x21')])(_0x241268[a5_0x3431('0x19')][a5_0x3431('0x12')]):metric_logger_1[a5_0x3431('0x17')]);throw _0x241268;}});}['completeRunGroupWithError'](_0x25379d){var _0x213083;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1['VERBOSE_LOGGING']){output[a5_0x3431('0x1d')]({'title':'Completing\x20with\x20an\x20error','bodyLines':[a5_0x3431('0x1c')+this[a5_0x3431('0xa')],'ciExecutionEnv:\x20'+this['ciExecutionEnv'],a5_0x3431('0x6')+this[a5_0x3431('0xd')],a5_0x3431('0x15')+_0x25379d]});}const _0x1a1a9b=(0x0,metric_logger_1['createMetricRecorder'])('completeRunGroup');try{const _0x4eb911=yield(0x0,axios_1[a5_0x3431('0x1')])(()=>this[a5_0x3431('0xc')]['post'](a5_0x3431('0xe'),{'branch':this['branch'],'runGroup':this[a5_0x3431('0xd')],'ciExecutionId':this[a5_0x3431('0xa')],'ciExecutionEnv':this[a5_0x3431('0x14')],'agentName':this[a5_0x3431('0x1e')],'criticalErrorMessage':_0x25379d}));if(environment_1['VERBOSE_LOGGING']){output[a5_0x3431('0x1d')]({'title':a5_0x3431('0x20')});}_0x1a1a9b['recordMetric']((0x0,metric_logger_1[a5_0x3431('0x21')])(_0x4eb911));}catch(_0xd030b0){_0x1a1a9b[a5_0x3431('0x1f')](((_0x213083=_0xd030b0===null||_0xd030b0===void 0x0?void 0x0:_0xd030b0['axiosException'])===null||_0x213083===void 0x0?void 0x0:_0x213083[a5_0x3431('0x12')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0xd030b0[a5_0x3431('0x19')][a5_0x3431('0x12')]):metric_logger_1[a5_0x3431('0x17')]);console['error'](_0xd030b0);}});}}exports[a5_0x3431('0x3')]=DistributedAgentApi;