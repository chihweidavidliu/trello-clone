const a15_0x7e6e=['roots','__esModule','addDependencies','projectGraph','targetDependencies','findTask','strictlyOrderedTargets','target','has','project','add','projects','../../../utilities/nx-imports','strip-json-comments','filter','indexOf','defineProperty','push','parse','TaskGraphCreator','defaultTargetDependencies','readFileSync','tasks','dependencies','addTaskToGraph','addTaskDependencies','length','createTaskGraph','toString'];(function(_0x3195e1,_0x7e6e5a){const _0x1023b3=function(_0x3521d4){while(--_0x3521d4){_0x3195e1['push'](_0x3195e1['shift']());}};_0x1023b3(++_0x7e6e5a);}(a15_0x7e6e,0x134));const a15_0x1023=function(_0x3195e1,_0x7e6e5a){_0x3195e1=_0x3195e1-0x0;let _0x1023b3=a15_0x7e6e[_0x3195e1];return _0x1023b3;};'use strict';Object[a15_0x1023('0x1b')](exports,a15_0x1023('0xc'),{'value':!![]});exports[a15_0x1023('0x1')]=exports['createTaskGraphCompat']=void 0x0;const stripJsonComments=require(a15_0x1023('0x18'));const fs_1=require('fs');const {getDependencyConfigs,workspaceRoot}=require(a15_0x1023('0x17'));function createTaskGraphCompat(_0x126adc,_0x176be9,_0x3af915){const _0x9964d2=JSON[a15_0x1023('0x0')](stripJsonComments((0x0,fs_1[a15_0x1023('0x3')])(workspaceRoot+'/nx.json')[a15_0x1023('0xa')]()));return new TaskGraphCreator(_0x176be9,getDefaultDependencyConfigs(_0x9964d2,_0x126adc))[a15_0x1023('0x9')](_0x3af915);}exports['createTaskGraphCompat']=createTaskGraphCompat;function getDefaultDependencyConfigs(_0xa82b2b,_0xeebb2e){var _0x4f497f,_0x34fb8b;const _0x40953a=(_0x4f497f=_0xa82b2b[a15_0x1023('0xf')])!==null&&_0x4f497f!==void 0x0?_0x4f497f:{};const _0x4be8b7=_0xeebb2e?(_0x34fb8b=_0xeebb2e[a15_0x1023('0x11')])!==null&&_0x34fb8b!==void 0x0?_0x34fb8b:['build']:[];for(const _0x41084d of _0x4be8b7){_0x40953a[_0x41084d]=_0x40953a[_0x41084d]||[];_0x40953a[_0x41084d][a15_0x1023('0x1c')]({'target':_0x41084d,'projects':a15_0x1023('0x5')});}return _0x40953a;}class TaskGraphCreator{constructor(_0x223445,_0x51fa1a){this[a15_0x1023('0xe')]=_0x223445;this[a15_0x1023('0x2')]=_0x51fa1a;}[a15_0x1023('0x9')](_0x4381b0){const _0xc72b0f={'roots':[],'tasks':{},'dependencies':{}};for(const _0x4c8c40 of _0x4381b0){this[a15_0x1023('0x6')](_0x4c8c40,_0xc72b0f);const _0x56cf3e=getDependencyConfigs(_0x4c8c40['target'],this[a15_0x1023('0x2')],this[a15_0x1023('0xe')]);if(!_0x56cf3e){continue;}this[a15_0x1023('0x7')](_0x4c8c40,_0x56cf3e,_0x4381b0,_0xc72b0f);}_0xc72b0f[a15_0x1023('0xb')]=Object['keys'](_0xc72b0f[a15_0x1023('0x5')])[a15_0x1023('0x19')](_0x5ddaf3=>_0xc72b0f['dependencies'][_0x5ddaf3][a15_0x1023('0x8')]===0x0);return _0xc72b0f;}['addTaskDependencies'](_0x28ad6b,_0x362850,_0x10d368,_0x20641e){for(const _0x3c744a of _0x362850){if(_0x3c744a[a15_0x1023('0x16')]==='self'){for(const _0xf410de of _0x10d368){if(_0xf410de['target']['project']===_0x28ad6b['target']['project']&&_0xf410de[a15_0x1023('0x12')][a15_0x1023('0x12')]===_0x3c744a[a15_0x1023('0x12')]){_0x20641e[a15_0x1023('0x5')][_0x28ad6b['id']]['push'](_0xf410de['id']);}}}else if(_0x3c744a[a15_0x1023('0x16')]===a15_0x1023('0x5')){const _0x598ab6=new Set();this['addDependencies'](_0x28ad6b['target'][a15_0x1023('0x14')],_0x3c744a[a15_0x1023('0x12')],_0x10d368,_0x20641e,_0x28ad6b['id'],_0x598ab6);}}}[a15_0x1023('0xd')](_0x4a32bb,_0x48fcef,_0x423086,_0x53609f,_0x34d677,_0x5c34b1){_0x5c34b1[a15_0x1023('0x15')](_0x4a32bb);const _0x45f72b=this[a15_0x1023('0xe')][a15_0x1023('0x5')][_0x4a32bb];if(_0x45f72b){const _0x3826cc=_0x45f72b['map'](_0xf647d7=>_0xf647d7[a15_0x1023('0x12')]);for(const _0x4408b0 of _0x3826cc){if(_0x5c34b1[a15_0x1023('0x13')](_0x4408b0)){continue;}const _0x3f392d=this[a15_0x1023('0x10')]({'project':_0x4408b0,'target':_0x48fcef},_0x423086);if(_0x3f392d){if(_0x53609f[a15_0x1023('0x5')][_0x34d677][a15_0x1023('0x1a')](_0x3f392d['id'])===-0x1){_0x53609f['dependencies'][_0x34d677]['push'](_0x3f392d['id']);}}else{this[a15_0x1023('0xd')](_0x4408b0,_0x48fcef,_0x423086,_0x53609f,_0x34d677,_0x5c34b1);}}}}[a15_0x1023('0x10')]({project,target},_0x32b7f0){return _0x32b7f0['find'](_0x5c533f=>_0x5c533f['target'][a15_0x1023('0x14')]===project&&_0x5c533f[a15_0x1023('0x12')]['target']===target);}[a15_0x1023('0x6')](_0x1ac15a,_0x8af92e){_0x8af92e[a15_0x1023('0x4')][_0x1ac15a['id']]=_0x1ac15a;_0x8af92e['dependencies'][_0x1ac15a['id']]=[];}}exports['TaskGraphCreator']=TaskGraphCreator;