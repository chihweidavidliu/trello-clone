const a2_0x9fdf=['resolve','put','../../../utilities/nx-imports','__awaiter','hashUrls','waitForStoreRequestsToComplete','response','done','statuses','VERBOSE_LOGGING','status','value','Error\x20when\x20storing\x20artifacts','throw','../../../utilities/environment','requests','scheduledTasks','get','storeRequests','storeInCurrentProcess','fileStorage','cacheError','push','Nx\x20Cloud:\x20Skipping\x20storing\x20','__esModule','next','hash','then','CloudRemoteCache','startRun','delayedStoreRequests','defineProperty','store','.\x20Status\x20404.','indexOf','Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.','runContext','messages','forEach','storage','extractErrorMessage','reduce','note','Nx\x20Cloud:\x20Cache\x20miss\x20','cache-miss','distributedExecutionId','axiosException'];(function(_0x31a548,_0x9fdf4a){const _0x414069=function(_0x4427c5){while(--_0x4427c5){_0x31a548['push'](_0x31a548['shift']());}};_0x414069(++_0x9fdf4a);}(a2_0x9fdf,0x134));const a2_0x4140=function(_0x31a548,_0x9fdf4a){_0x31a548=_0x31a548-0x0;let _0x414069=a2_0x9fdf[_0x31a548];return _0x414069;};'use strict';var __awaiter=this&&this[a2_0x4140('0x18')]||function(_0x31c728,_0x1d342f,_0x48c628,_0x554db0){function _0x12aee0(_0x38898f){return _0x38898f instanceof _0x48c628?_0x38898f:new _0x48c628(function(_0x3095ed){_0x3095ed(_0x38898f);});}return new(_0x48c628||(_0x48c628=Promise))(function(_0x47630b,_0x37533f){function _0x4c9913(_0x4fc455){try{_0xd1277b(_0x554db0[a2_0x4140('0x2e')](_0x4fc455));}catch(_0x23a6eb){_0x37533f(_0x23a6eb);}}function _0x27b565(_0x1a5cd5){try{_0xd1277b(_0x554db0[a2_0x4140('0x22')](_0x1a5cd5));}catch(_0x40f0cb){_0x37533f(_0x40f0cb);}}function _0xd1277b(_0x4d1612){_0x4d1612[a2_0x4140('0x1c')]?_0x47630b(_0x4d1612[a2_0x4140('0x20')]):_0x12aee0(_0x4d1612[a2_0x4140('0x20')])[a2_0x4140('0x1')](_0x4c9913,_0x27b565);}_0xd1277b((_0x554db0=_0x554db0['apply'](_0x31c728,_0x1d342f||[]))[a2_0x4140('0x2e')]());});};Object[a2_0x4140('0x5')](exports,a2_0x4140('0x2d'),{'value':!![]});exports['CloudRemoteCache']=void 0x0;const environment_1=require(a2_0x4140('0x23'));const {output}=require(a2_0x4140('0x17'));class CloudRemoteCache{constructor(_0x198992,_0xcb689e,_0x45c60f,_0x951007,_0x208de6,_0x417e5b){this[a2_0x4140('0xb')]=_0x198992;this['api']=_0xcb689e;this['runContext']=_0x45c60f;this[a2_0x4140('0x29')]=_0x951007;this[a2_0x4140('0x13')]=_0x208de6;this[a2_0x4140('0x28')]=_0x417e5b;this['storeRequests']=[];this[a2_0x4140('0x4')]=[];}['retrieve'](_0x987a62,_0x270af4){var _0x81e07f;return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x4140('0x2a')])return![];const _0xaee50d=yield this['hashUrls'](_0x987a62);if(!_0xaee50d||!_0xaee50d['get']){if(environment_1[a2_0x4140('0x1e')]){output['note']({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x987a62+'.'});}this[a2_0x4140('0xa')][a2_0x4140('0x1d')][_0x987a62]=a2_0x4140('0x12');return![];}try{yield this['fileStorage']['retrieve'](_0x987a62,_0xaee50d[a2_0x4140('0x26')],_0x270af4);this[a2_0x4140('0xa')][a2_0x4140('0x1d')][_0x987a62]='remote-cache-hit';return!![];}catch(_0x5bf8bc){const _0x5aec71=(_0x81e07f=_0x5bf8bc[a2_0x4140('0x14')])!==null&&_0x81e07f!==void 0x0?_0x81e07f:_0x5bf8bc;if(_0x5aec71[a2_0x4140('0x1b')]&&_0x5aec71[a2_0x4140('0x1b')][a2_0x4140('0x1f')]===0x194){if(environment_1[a2_0x4140('0x1e')]){output[a2_0x4140('0x10')]({'title':a2_0x4140('0x11')+_0x987a62+a2_0x4140('0x7')});}}else{this['messages'][a2_0x4140('0x2a')]=this[a2_0x4140('0xb')]['extractErrorMessage'](_0x5aec71,a2_0x4140('0xd'));}this[a2_0x4140('0xa')][a2_0x4140('0x1d')][_0x987a62]='cache-miss';return![];}});}[a2_0x4140('0x6')](_0x289ead,_0x2957f4){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x4140('0xb')][a2_0x4140('0x2a')])return![];const _0x4acfd8=Promise[a2_0x4140('0x15')]()[a2_0x4140('0x1')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x478662;const _0x50c40b=yield this[a2_0x4140('0x19')](_0x289ead);if(!_0x50c40b)return![];if(!_0x50c40b[a2_0x4140('0x16')]){if(environment_1['VERBOSE_LOGGING']){output[a2_0x4140('0x10')]({'title':a2_0x4140('0x2c')+_0x289ead+'.','bodyLines':['There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.',a2_0x4140('0x9')]});}return!![];}if(!this['storeInCurrentProcess']){this[a2_0x4140('0x4')][a2_0x4140('0x2b')]({'hash':_0x289ead,'url':_0x50c40b[a2_0x4140('0x16')]});return!![];}try{yield this['fileStorage'][a2_0x4140('0x6')](_0x289ead,_0x50c40b[a2_0x4140('0x16')],_0x2957f4);return!![];}catch(_0x4443f9){const _0x61e47d=(_0x478662=_0x4443f9['axiosException'])!==null&&_0x478662!==void 0x0?_0x478662:_0x4443f9;this['messages']['cacheError']=this[a2_0x4140('0xb')][a2_0x4140('0xe')](_0x61e47d,a2_0x4140('0xd'));return![];}}));this['storeRequests'][a2_0x4140('0x2b')](_0x4acfd8);return _0x4acfd8;});}[a2_0x4140('0x19')](_0x28ccce){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x28ccce in this['runContext'][a2_0x4140('0x24')]){return(yield this['runContext'][a2_0x4140('0x24')][_0x28ccce])[_0x28ccce];}else{const _0xfd027f=this[a2_0x4140('0xa')][a2_0x4140('0x25')]['filter'](_0x2752a6=>!this[a2_0x4140('0xa')][a2_0x4140('0x24')][_0x2752a6[a2_0x4140('0x0')]])['map'](_0x18ac2f=>_0x18ac2f['hash']);if(_0xfd027f[a2_0x4140('0x8')](_0x28ccce)===-0x1){_0xfd027f['push'](_0x28ccce);}const _0x48b18a=this['api'][a2_0x4140('0x3')](this[a2_0x4140('0x13')],_0xfd027f);_0xfd027f[a2_0x4140('0xc')](_0x4138a2=>{this[a2_0x4140('0xa')][a2_0x4140('0x24')][_0x4138a2]=_0x48b18a;});return(yield _0x48b18a)[_0x28ccce];}});}[a2_0x4140('0x1a')](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4dd16a=yield Promise['all'](this[a2_0x4140('0x27')])[a2_0x4140('0x1')](_0x3114aa=>_0x3114aa[a2_0x4140('0xf')]((_0x2c953f,_0xded66d)=>_0x2c953f&&_0xded66d,!![]));if(!_0x4dd16a){throw new Error(a2_0x4140('0x21'));}});}}exports[a2_0x4140('0x2')]=CloudRemoteCache;